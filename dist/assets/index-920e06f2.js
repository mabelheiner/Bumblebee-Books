(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const t of o)if(t.type==="childList")for(const l of t.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function s(o){const t={};return o.integrity&&(t.integrity=o.integrity),o.referrerPolicy&&(t.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?t.credentials="include":o.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function n(o){if(o.ep)return;o.ep=!0;const t=s(o);fetch(o.href,t)}})();$("#top-header").load("/views/partials/header.html");$("#footer").load("/views/partials/footer.html");const a="v1OBR5VQay1gkrGZ8FVwvuxSUYFEG84A",m="AIzaSyDfpv-I46KRDNwioegRR1fzS4eGPpVnVdk";async function u(){const r=await fetch("https://api.nytimes.com/svc/books/v3/lists.json?list-name=hardcover-fiction&api-key="+a);let i=document.getElementById("aBook");i.innerHTML="<p><i>Loading top favorites...</i></p>";let s="";if(r.ok){const n=await r.json(),o=[];for(let t=0;t<n.results.length;t++)o.push(n.results[t].book_details[0].title);for(let t=0;t<o.length&&t<10;t++){const e=await(await fetch("https://www.googleapis.com/books/v1/volumes?q=intitle:"+o[t]+"&filter=paid-ebooks&maxResults=40&key="+m)).json();console.log("Book info",e),e.totalItems>0&&e.items[0].volumeInfo.averageRating&&(e.items[0].saleInfo.listPrice.amount?s+=`<div><a href="/views/single_book_view/index.html?cover=${e.items[0].volumeInfo.imageLinks.thumbnail}&title=${e.items[0].volumeInfo.title}&author=${e.items[0].volumeInfo.authors[0]}&length=${e.items[0].volumeInfo.pageCount}&publishedDate=${e.items[0].volumeInfo.publishedDate}&description=${encodeURIComponent(e.items[0].volumeInfo.description)}&price=${e.items[0].saleInfo.listPrice.amount}"><img src=${e.items[0].volumeInfo.imageLinks.thumbnail} alt=${e.items[0].volumeInfo.title}><h2>`+e.items[0].volumeInfo.title+"</h2><i>"+e.items[0].volumeInfo.authors[0]+"</i><p>"+e.items[0].volumeInfo.averageRating+"★</p><p>"+e.items[0].volumeInfo.categories[0]+"</p><br><p>$"+e.items[0].saleInfo.listPrice.amount+"</a></div>":s+=`<div><a href="/views/single_book_view/index.html?cover=${e.items[0].volumeInfo.imageLinks.thumbnail}&title=${e.items[0].volumeInfo.title}&author=${e.items[0].volumeInfo.authors[0]}&length=${e.items[0].volumeInfo.pageCount}&publishedDate=${e.items[0].volumeInfo.publishedDate}&description=${encodeURIComponent(e.items[0].volumeInfo.description)}&price=${12.99}"><img src=${e.items[0].volumeInfo.imageLinks.thumbnail} alt=${e.items[0].volumeInfo.title}><h2>`+e.items[0].volumeInfo.title+"</h2><i>"+e.items[0].volumeInfo.authors[0]+"</i><p>"+e.items[0].volumeInfo.averageRating+"★</p><p>"+e.items[0].volumeInfo.categories[0]+"</p><br><p>$"+12.99+"</p></a></div>")}i.innerHTML=s}else i.innerHTML="<p>Sorry, unable to load top favorites at this time, please search for a book to find it.</p>"}u();
